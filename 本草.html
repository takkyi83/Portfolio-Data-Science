<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" charset="UTF-8">
    <title>Project Page</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
<div class="container">
    <h1>Decrypt Compendium of Materia Medica: Ancient Chinese unstructured text exploration , medicinal material
        , database construction and visual exploration analysis</h1>
    <div class="image-container">
    <img src="本草海報.jpeg" class="header-image" alt="Header Image" width="600" height="3000" class="centered-image">
    </div>
    <p>
        Traditional Chinese medicine (TCM) is said to have a history of thousands of years. The story of Shen Nong
        tasting hundreds of herbs is no longer verifiable, but what cannot be denied is that TCM is built upon the
        wisdom recorded by ancient people through continuous experimentation with various animals, plants, and even
        minerals. The majority of TCM sources come from medicinal herbs of plant origin, and their usage is widespread.
        Despite the long and profound history of TCM, in modern medical history, Western medicine and pharmaceuticals
        have taken the spotlight. This is partly because Western medicine often provides immediate effects and follows
        a systematic and scientific approach to record and verify its practices. In contrast, TCM prescriptions vary for
        different practitioners and even for the same condition, leading to a perception of unreliability. However, with
        the progress of technology and the rapid and extensive dissemination of information in today's era, along with
        the introduction of Western scientific methods, the education of TCM practitioners has shifted from an
        apprenticeship system to a more professional, academic, and internationalized approach. Additionally, with the
        maturity of information technology, utilizing these techniques to handle unstructured TCM data will undoubtedly
        promote the modernization of TCM.
    </p>

    <p>
        <h2> Objectives: </h2>
        To organize and analyze the unstructured data in the field of TCM, this study initially focuses on analyzing a
        single ancient text. The chosen text is the most representative work, "Compendium of Materia Medica." This
        selection is based on its widespread recognition as an ancient TCM text and because it represents the wisdom
        extracted by Li Shizhen from multiple ancient texts. For this study, the "Compendium of Materia Medica" provides
        sufficient depth and breadth. The primary objectives of this research are as follows:
        <ul>
        <li>
            1. Establish a structured TCM database to transform unstructured ancient texts into easily analyzable data.
        </li>
        <li>
            2. Investigate the relationships and clusters among medicinal herbs, diseases, and compounds in the
            "Compendium of Materia Medica" using algorithms and machine learning.
        </li>
        <li>
            3. Compare the research findings with the general public's usage and understanding of TCM.
        </li>
        </ul>
        By achieving these objectives, the research results can provide experimental verification and data inquiry for
        non-professionals interested in TCM and medical institutions with questions about herbal medicine prescriptions.
        Ultimately, when all the data is organized, it will form a big data platform for TCM.
    </p>
    <h2>Research Methodologies</h2>
        The data source of this study is the full text of "Compendium of Materia Medica", which is divided into 16 volumes
        , with 1892 kinds of medicines and 11096 compounds. The tools used are Python, MySQL, Tableau, and Flask.
    <br>
    <img src="本草-項目流程圖.jpg", alt="Research Method Flow Chart">

    <p>
        This study starts with data cleaning, and uses Python regular expressions for data extraction.
        Then, the preprocessed data is used to build a Chinese medicine database using MySQL. LDA clustering analysis
        and Apriori correlation analysis are used for data analysis, and then Tableau software is used for visual
        exploration and analysis of the Chinese medicine database.
    </p>

    <h2>Data Cleaning</h2>
    <p>
        Compendium of Materia Medica belongs to unstructured textual data (not neatly formatted data tables). The data is consisted by free-form text, and paragraphs. Due to the unstructured and noisy nature of text data, it is difficult to directly apply machine learning methods to it. We converted unstructured text data into structured text data by finding content rules and extracting data using Regular Expression.
    </p>
    <h3>Common issues of unstrctured text data</h3>
    <ul>
        <li>1. Data Missing</li>
        <img src="unstructured-text-issues.jpg", alt="unstructured text issues">
        <li>2. Wrong Format</li>
        <img src="hard-to-see-patterns.jpg", alt="Hard to see patterns">
    </ul>
    </p>

    <p>
    <h3>Data Structuring </h3>
    <ul>
    <p>
        <li>
            1. Convert table of contents, titles, and content into structured formats
            Contents: <br>
            <img src="data-structuring.png", alt="data structuring"> <br>
            After reading the text, it is found that the table of contents, title, and content follow the following rules
            <table>
                <tr>
                    <th>Items</th>
                    <th>Rules</th>
                </tr>
                <tr>
                    <td>Table of contents</td>
                    <td>It's followed by a blank line</td>
                </tr>
                <tr>
                    <td>Title</td>
                    <td>It's followed by indented content</td>
                </tr>
                <tr>
                    <td>Content, Indent content</td>
                    <td>Indent content</td>
                </tr>
            </table> <br>

            Use regular expression to extract table of contents, title, and content. <br>
            <img src="extract-content.png", alt="extract content"> <br>
            Convert table of content, titles, and content to structured format <br>
            <img src="convert-to-structured-format.png", alt="convert to structured format"><br>
        </li>
    </p>
    <p>
        <li>
            2. Convert aliases, nature and taste, indications, compound, and parts into formatted formats <br>
            Content: <br>
            <img src="convert-aliases.png", alt="convert aliases"> <br>

            Use Regular Expression to extract aliases, nature and taste, indications, compound, and parts.<br>
            <img src="regex-extract-aliases.png", alt="use regex to extract aliases"> <br>

            Convert aliases, nature and taste, indications, compound, and parts into structured format.<br>
            <img src="format-aliases.png", alt="format aliases"><br>
        </li>
    </p>
    <p>
        <li>
            3. Convert nature and taste levels into structured format.<br>
            Content<br>
            <img src="taste-text.png", alt="taste levels">
            Score the taste levels from 0 to 3. 0 as the weakest and 3 as the strongest.<br>
            <table>
                <tr>
                    <th>Attribute</th>
                    <th>Scores</th>
                </tr>
                <tr>
                    <td>Slightly cold</td>
                    <td>1</td>
                </tr>
                <tr>
                    <td>Cold</td>
                    <td>2</td>
                </tr>
                <tr>
                    <td>Very Cold</td>
                    <td>3</td>
                </tr>
            </table>
            <br>
            Use Regular Expression to extract the taste and nature levels.<br>
            <img src="extract-taste-levels.png", alt="extract taste levels"> <br>
            Convert the levels of nature and taste to formatted text. <br>
            <img src="format-levels.png", alt="format levels"> <br>
        </li>
    </p>
    <p>
        <li>
            4. Convert compound to structured format <br>
            Content<br>
            <img src="format-prescription.png", alt="prescription formatting" width=700 height="300"><br>
            Extract presription titles and descriptions with regular expression <br>
            <img src="prescription-regex.png", alt="prescription regex"><br>
            Convert compound and description to formatted text<br>
            <img src="compound-formatted.png", alt="compound formatted text">
        </li>
    </p>
    </ul>
    <p>
        <h2>Building a relational database</h2>
        The database comprises multiple tables containing information on Chinese herbal medicine and diseases. The structured text will be utilised to establish a relational database for facilitating future analysis.<br><br>
        <strong>Database entity-relationship model</strong><br>
        <img src="er-model.png", alt="database er model"><br>
        <strong>Database Relational Diagram</strong>
        <img src="db-diagram.png" alt="database relationship diagram"><br>
    </p>
    <p>
    <h2>Data Analysis</h2>
    <ul>
        <strong>1. Latent Dirichlet Allocation (LDA)</strong><br>
        LDA is an unsupervised machine learning technique used to uncover underlying topic information within extensive document collections or corpora.

        It utilizes the "bag of words" approach, treating each document as a frequency vector, thereby converting text information into easily modeled numerical data. However, the bag of words approach disregards the order of words, which simplifies the problem while also presenting an opportunity for model enhancement. Each document represents a probability distribution of constituent topics, while each topic represents a probability distribution of numerous words.<br>
        <img src="lda.png" alt="lda"><br>
        <p>
        <Strong>Use LDA to cluster diseases</Strong><br>
        We used the LDA clustering method to extract distinct features of disease names, which are then grouped into 2 to 45 clusters. Currently, the maximum number of clusters achieved is 45. Expert consultation from relevant domains revealed that the results obtained with 45 clusters are the most easily interpretable. Moreover, experiments were conducted with more than 45 clusters to observe their outcomes.
        </p>
    </ul>
    <ul>
        <strong>2. Use Apriori to find connections between medicines</strong><br>
        <p>
        Within traditional Chinese medicine, the principle of compatibility known as the "Seven Emotions"(七情配伍) emphasizes the importance of combining herbal medicines. This is because the interaction between different herbs can lead to various effects: some may be incompatible, while others may enhance therapeutic efficacy. Additionally, certain combinations can result in toxic effects. The concept of the Seven Emotions(七情配伍) compatibility includes the following aspects:
        </p>
        <p>
        Single Action(單行): Refers to the use of a single herb to achieve the desired effects without the need for additional herbs.
        </p>

        Mutual Complementarity(相須): Involves the combination of herbs with similar properties and therapeutic effects to enhance their original efficacy. For example:<br>
        In the analysis results, Zhimu(知母) and Shashen(沙參) both possess heat-clearing properties. Fuling(茯苓) and Zexie(澤瀉), commonly used in clinical practice, are known for their diuretic and damp-draining effects. Fuling(茯苓) has a mild, sweet taste and is effective in promoting diuresis, draining dampness, and nourishing the heart.<br>
        <img src="apriori1.png" alt="apriori1"><br>
        <img src="apriori2.png" alt="apriori2"><br>

    </ul>
    </p>


    Text content:

參考：
    https://docs.google.com/document/d/1s-OWEO2XJwpRMZHgImGYmBns99UHFrUk/edit
    https://docs.google.com/presentation/d/1c6-ju0gYcwwg254prhcUZ47gW0nj7qJ_/edit#slide=id.p4

</div>
</body>
</html>
